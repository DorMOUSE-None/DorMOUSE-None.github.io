<!DOCTYPE html>
<html lang="zh-cmn-Hans-CN" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
    
    <head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.68.3" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="ffutop" />
  <meta property="og:url" content="https://www.ffutop.com/posts/2018-08-19-understand-kernel-0/" />
  <link rel="canonical" href="https://www.ffutop.com/posts/2018-08-19-understand-kernel-0/" /><link rel="apple-touch-icon" href="favicon.ico" />
  <link rel="icon" href="favicon.ico" />
  <link rel="shortcut" href="favicon.ico" /><link rel="alternate" type="application/atom+xml" href="https://www.ffutop.com/index.xml" title="Utop&#39;s Blog">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https://www.ffutop.com/"
      },
      "articleSection" : "posts",
      "name" : "理解 Linux Kernel (0) - 概述",
      "headline" : "理解 Linux Kernel (0) - 概述",
      "description" : "\u003ch2 id=\"概述\"\u003e概述\u003c/h2\u003e\n\u003cp\u003e《理解Linux Kernel》系列最早开始于 2018 年中，当时我刚刚结束对 JVM (Java Virtual Machine, Java 虚拟机) \u003ca href=\"https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-4.html\"\u003eClassFile 文件格式\u003c/a\u003e的学习。彼时，在\u003cem\u003e实现新编程语言\u003c/em\u003e、\u003cem\u003e学习 Linux 内核实现\u003c/em\u003e、\u003cem\u003e继续深入 JVM 源码\u003c/em\u003e三个下一阶段的命题中，我选择了拥抱 Linux 源码。\u003c/p\u003e\n\u003cp\u003e时间过去了大半年，我已经简单地建立了对 Linux Kernel 的结构化认知。趁着现阶段有一些闲暇，整理过去的文章，以期删繁就简，并对错误的描述进行修正。\u003c/p\u003e\n\u003cp\u003e《理解 Linux Kernel》系列最早发布于\u003ca href=\"https://www.ffutop.com/\"\u003e我的博客 (Utop\u0026rsquo;s Blog)\u003c/a\u003e。由于这些文章的完成完全出于个人兴趣，对每个内核子系统的学习往往浅尝辄止，但我依旧认为这个系列对初学者来说是大有裨益的。\u003c/p\u003e\n\u003cp\u003e本系列对内核的学习完全建立在 0.11、2.6.24 两个版本源码的基础上。从 0.11 版本入门，学习硬件启动阶段进行的主要操作、任务调度、文件系统等早期版本已初现雏形的子系统；从 2.6.24 版本进阶，学习网络、内存管理等子系统的实现。在此强烈推荐，直接阅读源码对理解的帮助最为深远。请随时备上两个版本的源码，以备深入理解。\u003c/p\u003e",
      "inLanguage" : "zh-cmn-Hans-CN",
      "author" : "ffutop",
      "creator" : "ffutop",
      "publisher": "ffutop",
      "accountablePerson" : "ffutop",
      "copyrightHolder" : "ffutop",
      "copyrightYear" : "2018",
      "datePublished": "2018-08-19T00:00:00Z",
      "dateModified" : "2018-08-19T00:00:00Z",
      "url" : "https://www.ffutop.com/posts/2018-08-19-understand-kernel-0/",
      "keywords" : [ "Linux","Kernel", ]
  }
</script>
<title>理解 Linux Kernel (0) - 概述 - Utop&#39;s Blog</title>
  <meta property="og:title" content="理解 Linux Kernel (0) - 概述 - Utop&#39;s Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="概述
《理解Linux Kernel》系列最早开始于 2018 年中，当时我刚刚结束对 JVM (Java Virtual Machine, Java 虚拟机) ClassFile 文件格式的学习。彼时，在实现新编程语言、学习 Linux 内核实现、继续深入 JVM 源码三个下一阶段的命题中，我选择了拥抱 Linux 源码。
时间过去了大半年，我已经简单地建立了对 Linux Kernel 的结构化认知。趁着现阶段有一些闲暇，整理过去的文章，以期删繁就简，并对错误的描述进行修正。
《理解 Linux Kernel》系列最早发布于我的博客 (Utop&rsquo;s Blog)。由于这些文章的完成完全出于个人兴趣，对每个内核子系统的学习往往浅尝辄止，但我依旧认为这个系列对初学者来说是大有裨益的。
本系列对内核的学习完全建立在 0.11、2.6.24 两个版本源码的基础上。从 0.11 版本入门，学习硬件启动阶段进行的主要操作、任务调度、文件系统等早期版本已初现雏形的子系统；从 2.6.24 版本进阶，学习网络、内存管理等子系统的实现。在此强烈推荐，直接阅读源码对理解的帮助最为深远。请随时备上两个版本的源码，以备深入理解。" />
  <meta name="description" content="概述
《理解Linux Kernel》系列最早开始于 2018 年中，当时我刚刚结束对 JVM (Java Virtual Machine, Java 虚拟机) ClassFile 文件格式的学习。彼时，在实现新编程语言、学习 Linux 内核实现、继续深入 JVM 源码三个下一阶段的命题中，我选择了拥抱 Linux 源码。
时间过去了大半年，我已经简单地建立了对 Linux Kernel 的结构化认知。趁着现阶段有一些闲暇，整理过去的文章，以期删繁就简，并对错误的描述进行修正。
《理解 Linux Kernel》系列最早发布于我的博客 (Utop&rsquo;s Blog)。由于这些文章的完成完全出于个人兴趣，对每个内核子系统的学习往往浅尝辄止，但我依旧认为这个系列对初学者来说是大有裨益的。
本系列对内核的学习完全建立在 0.11、2.6.24 两个版本源码的基础上。从 0.11 版本入门，学习硬件启动阶段进行的主要操作、任务调度、文件系统等早期版本已初现雏形的子系统；从 2.6.24 版本进阶，学习网络、内存管理等子系统的实现。在此强烈推荐，直接阅读源码对理解的帮助最为深远。请随时备上两个版本的源码，以备深入理解。" />
  <meta property="og:locale" content="zh-cmn-Hans-CN" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">
  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="Utop&#39;s Blog">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92258941-1"></script>
</head>

     
  </head>
  <body>
    
  <article class="post Chinese" id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="signatures site-title">
    <a href="/">FFUTOP</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">理解 Linux Kernel (0) - 概述</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2018-08-19 00:00:00 UTC">
                19 Aug 2018
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="https://www.ffutop.com/">@ffutop</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <h2 id="概述">概述</h2>
<p>《理解Linux Kernel》系列最早开始于 2018 年中，当时我刚刚结束对 JVM (Java Virtual Machine, Java 虚拟机) <a href="https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-4.html">ClassFile 文件格式</a>的学习。彼时，在<em>实现新编程语言</em>、<em>学习 Linux 内核实现</em>、<em>继续深入 JVM 源码</em>三个下一阶段的命题中，我选择了拥抱 Linux 源码。</p>
<p>时间过去了大半年，我已经简单地建立了对 Linux Kernel 的结构化认知。趁着现阶段有一些闲暇，整理过去的文章，以期删繁就简，并对错误的描述进行修正。</p>
<p>《理解 Linux Kernel》系列最早发布于<a href="https://www.ffutop.com/">我的博客 (Utop&rsquo;s Blog)</a>。由于这些文章的完成完全出于个人兴趣，对每个内核子系统的学习往往浅尝辄止，但我依旧认为这个系列对初学者来说是大有裨益的。</p>
<p>本系列对内核的学习完全建立在 0.11、2.6.24 两个版本源码的基础上。从 0.11 版本入门，学习硬件启动阶段进行的主要操作、任务调度、文件系统等早期版本已初现雏形的子系统；从 2.6.24 版本进阶，学习网络、内存管理等子系统的实现。在此强烈推荐，直接阅读源码对理解的帮助最为深远。请随时备上两个版本的源码，以备深入理解。</p>
<h2 id="系列文章">系列文章</h2>
<p>=== 分割线 （以下待整理） ===</p>
<ul>
<li><a href="https://www.ffutop.com/2018-08-19-understand-Kernel-0/">理解 Linux Kernel (0) - 概述</a></li>
<li><a href="https://www.ffutop.com/2018-08-19-understand-Kernel-1/">理解 Linux Kernel (1) - BIOS</a></li>
<li><a href="https://www.ffutop.com/2018-08-26-understand-Kernel-2/">理解 Linux Kernel (2) - 多任务切换</a></li>
<li><a href="https://www.ffutop.com/2018-10-06-understand-Kernel-3/">理解 Linux Kernel (3) - 操作系统启动</a></li>
<li><a href="https://www.ffutop.com/2018-10-12-understand-Kernel-4/">理解 Linux Kernel (4) - 任务调度</a></li>
<li><a href="https://www.ffutop.com/2018-10-14-understand-Kernel-5/">理解 Linux Kernel (5) - 文件系统</a></li>
<li><a href="https://www.ffutop.com/2018-11-11-understand-Kernel-6/">理解 Linux Kernel (6) - 文件操作（读、写）</a></li>
<li><a href="https://www.ffutop.com/2018-12-28-understand-Kernel-7/">理解 Linux Kernel (7) - 字符设备</a></li>
<li><a href="https://www.ffutop.com/2019-01-15-understand-Kernel-8/">理解 Linux Kernel (8) - 网络</a></li>
<li><a href="https://www.ffutop.com/2019-03-05-understand-Kernel-9/">理解 Linux Kernel (9) - I/O 多路复用</a></li>
<li><a href="https://www.ffutop.com/2019-04-10-understand-Kernel-10/">理解 Linux Kernel (10) - 执行的上下文</a></li>
</ul>
<p><em>以下是18年年中原文（稍作整理）</em></p>
<h2 id="开端">开端</h2>
<p>刚刚结束 JVM ClassFile 文件格式的学习，见识了 JVM 对 CPU 架构的模拟：</p>
<ol>
<li>有限而统一的指令集（不超过 256 个，可以用 1 字节维护）</li>
<li>剔除寄存器概念而使用操作数栈作为替代</li>
<li>使用局部变量表来模拟任务栈</li>
<li>高度封装的成员变量和方法的寻址方式</li>
</ol>
<p>Java 虚拟机的机制相当简洁。就寄存器而言，就已经极大的简化了 CPU 复杂的结构。更遑论不同 CPU 架构带来的多套指令集的问题。</p>
<p>其实我本来是想要继续学习 Hotspot 虚拟机的实现。但是，混杂的代码(C++, Java, 平台相关各种实现)给我带来了很大的阅读障碍。最根本的，我甚至找不到一个入口作为整个学习计划的起点。<em>当然，也与我根本没仔细去看有关，笑:)</em>。</p>
<p>受老大推荐，我开始看《程序员的自我修养——链接、装载与库》一书。此书对 ELF 格式的介绍，对静态链接与动态链接的深入剖析都给了我深刻的印象，向我展示了 C 语言更深入的一面。但是，macOS 给我带来了比较大的客观阻碍（即使使用 Docker 容器得到了一个可用的 Linux 环境，但与直接建立在硬件上的系统还是有所区别）。同时，书中的部分内容上下文不一致，给阅读带来了障碍。总之，此书中的内容不适合我我这种初学者逐一进行书中所述的全部实验。</p>
<p>多重因素最终使我决定学习 Linux Kernel，希望对操作系统的理解能够帮助我建立对各种用户层面应用的画像。</p>
<h2 id="学习资料">学习资料</h2>
<ol>
<li>Source Code of <a href="https://www.oldlinux.org/Linux.old/kernel/0.1x/linux-0.11/">linux-v0.11</a> and <a href="https://mirrors.edge.kernel.org/pub/linux/kernel/v2.6/">linux-2.6.24</a></li>
<li>《Linux 内核完全注释》</li>
<li>《深入 Linux 内核架构》</li>
<li>Bochs 仿真器</li>
<li><a href="https://vger.kernel.org/vger-lists.html">内核邮件组</a></li>
</ol>
<h2 id="软硬件描述">软硬件描述</h2>
<p>进行这方面的描述，是因为 Linux Kernel 将直接与底层硬件打交道(当然，这方面使用的 Bochs 仿真器)。
但是，准备诸如 .img (磁盘映像文件), 机器指令文件等都不得不借助于现有的平台。</p>
<ul>
<li>操作系统: macOS Mojave 10.14.4 , Ubuntu 18.04 （云主机）</li>
<li>仿真器  : Bochs 2.6.9_2 （macOS 与 Ubuntu 上相同）</li>
<li>更多    : 将直接在正文首次使用到时进行说明</li>
</ul>
<p><em>Read the Source Code. Have Fun.</em></p>
<h2 id="参考">参考</h2>
<p>[1]. 俞甲子. 程序员的自我修养[M]. 电子工业出版社, 2009.
[2]. 赵炯. Linux内核完全注释 内核版本0.11 V3.0[EB/OL]. <a href="https://www.oldlinux.org/,">https://www.oldlinux.org/,</a> 2007</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plain" data-lang="plain">  __                    __                  
 / _| __ _ _ __   __ _ / _| ___ _ __   __ _ 
| |_ / _` | &#39;_ \ / _` | |_ / _ \ &#39;_ \ / _` |
|  _| (_| | | | | (_| |  _|  __/ | | | (_| |
|_|  \__,_|_| |_|\__, |_|  \___|_| |_|\__, |
                 |___/                |___/ 
</code></pre></div>
        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
            <div class="post-category">
              <a href="/categories/%e6%8a%80%e6%9c%af/">
                技术
              </a>
            </div>
            
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            
          </div>
        </div>

        
        

<div class="releated-content">
  <h3>Related Posts</h3>
  <ul>
    
    <li><a href="/posts/2018-08-19-understand-kernel-1/">理解 Linux Kernel (1) - BIOS</a></li>
    
  </ul>
</div>

        
        
        <div style="height: 50px;"></div>
        
        <div class="post-comments">
          <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://ffutop.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

        </div>
        
        

        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="/posts/" target="_blank">Posts</a>
  </div>
  
  <div class="site-footer-item">
    <a href="/index.xml" target="_blank">RSS</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://github.com/ffutop" target="_blank">Github</a>
  </div>
  
  <div class="site-footer-item">
    <a href="/about/" target="_blank">About</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

 
  </body>
</html>
