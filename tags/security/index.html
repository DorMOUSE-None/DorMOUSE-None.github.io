<!DOCTYPE html>
<html lang="zh-cmn-Hans-CN" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
    
    <head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.68.3" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="ffutop" />
  <meta property="og:url" content="https://www.ffutop.com/tags/security/" />
  <link rel="canonical" href="https://www.ffutop.com/tags/security/" /><link rel="apple-touch-icon" href="favicon.ico" />
  <link rel="icon" href="favicon.ico" />
  <link rel="shortcut" href="favicon.ico" /><link rel="alternate" type="application/atom+xml" href="https://www.ffutop.com/index.xml" title="Utop&#39;s Blog">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/www.ffutop.com\/"
      },
      "articleSection" : "tags",
      "name" : "Security",
      "headline" : "Security",
      "description" : "",
      "inLanguage" : "zh-cmn-Hans-CN",
      "author" : "ffutop",
      "creator" : "ffutop",
      "publisher": "ffutop",
      "accountablePerson" : "ffutop",
      "copyrightHolder" : "ffutop",
      "copyrightYear" : "2018",
      "datePublished": "2018-12-15 00:00:00 \x2b0000 UTC",
      "dateModified" : "2018-12-15 00:00:00 \x2b0000 UTC",
      "url" : "https:\/\/www.ffutop.com\/tags\/security\/",
      "keywords" : [  ]
  }
</script>
<title>Security - Utop&#39;s Blog</title>
  <meta property="og:title" content="Security - Utop&#39;s Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="" />
  <meta name="description" content="" />
  <meta property="og:locale" content="zh-cmn-Hans-CN" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">
  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="Utop&#39;s Blog">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92258941-1"></script>
</head>

     
  </head>
  <body>
    
  <article class="posts">
    <div class="row">
      <div class="col-xs-12">
        
<header>
  <div class="signatures site-title">
    <a href="/">FFUTOP</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>


        <h1 class="taxonomy-term">Security</h1>
        <div id="posts-list">
          
          <section>
            <header class="post-header">
              <h1 class="post-title">SQL 注入</h1>
              <div class="row post-desc">
                <div class="col-xs-6">
                  
                  <time class="post-date" datetime="2018-12-15 00:00:00 UTC">
                    15 Dec 2018
                  </time>
                  
                </div>
                <div class="col-xs-6">
                  
                  <div class="post-author">
                    <a target="_blank" href="https://www.ffutop.com/">@ffutop</a>
                  </div>
                  
                </div>
              </div>
            </header>

            <div class="post-content markdown-body">
                <p>说实话此前对 SQL 注入的理解仅仅只是皮毛。当然，目前也是，只是有了一定程度的理解。</p>
<p>最近好像工具用得有些过头了，需要停下来整理下工具的实现原理。</p>
<p>更好地理解了工具实现，才能更加心安理得地使用工具。毕竟等别人怼的时候，还能够比较安心地回道: &ldquo;我用不用现成的工具只是取决于我想不想自己再写一套&rdquo;</p>
<p>当然，毕竟成熟的工具有更多的优化，这就不是短时间内我想不想自己写的问题了，哈哈。</p>
                <a class="summary-read-more" href='https://www.ffutop.com/posts/2018-12-15-sql-%E6%B3%A8%E5%85%A5/'><nobr class="summary-read-more">Read more →</nobr></a>
                <div class="post-line"></div>
            </div>
          </section>
          
          
          <section>
            <header class="post-header">
              <h1 class="post-title">Java 安全访问与权限控制</h1>
              <div class="row post-desc">
                <div class="col-xs-6">
                  
                  <time class="post-date" datetime="2018-07-04 00:00:00 UTC">
                    04 Jul 2018
                  </time>
                  
                </div>
                <div class="col-xs-6">
                  
                  <div class="post-author">
                    <a target="_blank" href="https://www.ffutop.com/">@ffutop</a>
                  </div>
                  
                </div>
              </div>
            </header>

            <div class="post-content markdown-body">
                <h2 id="绪论">绪论</h2>
<p><em>本文只是对 Java 安全访问与权限控制的基础性探究。</em></p>
<p><strong>本节与全文内容无关，如无兴趣阅读，可以跳过</strong></p>
<p>了解 Java 安全访问相关内容的初衷，是准备在项目中利用 Java 标准库提供的 ServiceLoader 对 SPI 实现类进行&quot;自动发现&quot;和加载。
这对于将本项目作为二方库来依赖的上层项目将更为方便，只需要</p>
<ol>
<li>在 <code>META-INF.services</code> 目录下配置被命名为 SPI 接口全限定名的文件及添加相关内容</li>
<li>由项目的注册管理器触发下列 Java 代码</li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#666">{</span>
    ServiceLoader<span style="color:#666">&lt;</span>XxxPolicy<span style="color:#666">&gt;</span> xxxPolicyServiceLoader <span style="color:#666">=</span> ServiceLoader<span style="color:#666">.</span><span style="color:#4070a0">load</span><span style="color:#666">(</span>XxxPolicy<span style="color:#666">.</span><span style="color:#4070a0">class</span><span style="color:#666">);</span>
    <span style="color:#007020;font-weight:bold">for</span> <span style="color:#666">(</span>Iterator<span style="color:#666">&lt;</span>XxxPolicy<span style="color:#666">&gt;</span> it <span style="color:#666">=</span> xxxPolicyServiceLoader<span style="color:#666">.</span><span style="color:#4070a0">iterator</span><span style="color:#666">();</span> it<span style="color:#666">.</span><span style="color:#4070a0">hasNext</span><span style="color:#666">();</span> <span style="color:#666">)</span> <span style="color:#666">{</span>
        XxxPolicy xxxPolicy <span style="color:#666">=</span> it<span style="color:#666">.</span><span style="color:#4070a0">next</span><span style="color:#666">();</span>
        <span style="color:#60a0b0;font-style:italic">// ... more code ...
</span><span style="color:#60a0b0;font-style:italic"></span>    <span style="color:#666">}</span>
<span style="color:#666">}</span>
</code></pre></div><p>就可以完成一个新的 SPI 策略的注册工作。</p>
<p>但是，在尝试实现，了解了 ServiceLoader 源码，以及 DriverManager 和 mysql-connection-java-<!-- raw HTML omitted -->.jar 在注册 Driver 相关的代码。
发现怎么也绕不开 Java 安全访问相关的内容。诸如下列这段来自 DriverManager.loadInitialDrivers() 的代码:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">AccessController<span style="color:#666">.</span><span style="color:#4070a0">doPrivileged</span><span style="color:#666">(</span><span style="color:#007020;font-weight:bold">new</span> PrivilegedAction<span style="color:#666">&lt;</span>Void<span style="color:#666">&gt;()</span> <span style="color:#666">{</span>
    <span style="color:#007020;font-weight:bold">public</span> Void <span style="color:#06287e">run</span><span style="color:#666">()</span> <span style="color:#666">{</span>

        ServiceLoader<span style="color:#666">&lt;</span>Driver<span style="color:#666">&gt;</span> loadedDrivers <span style="color:#666">=</span> ServiceLoader<span style="color:#666">.</span><span style="color:#4070a0">load</span><span style="color:#666">(</span>Driver<span style="color:#666">.</span><span style="color:#4070a0">class</span><span style="color:#666">);</span>
        Iterator<span style="color:#666">&lt;</span>Driver<span style="color:#666">&gt;</span> driversIterator <span style="color:#666">=</span> loadedDrivers<span style="color:#666">.</span><span style="color:#4070a0">iterator</span><span style="color:#666">();</span>

        <span style="color:#007020;font-weight:bold">try</span><span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">while</span><span style="color:#666">(</span>driversIterator<span style="color:#666">.</span><span style="color:#4070a0">hasNext</span><span style="color:#666">())</span> <span style="color:#666">{</span>
            driversIterator<span style="color:#666">.</span><span style="color:#4070a0">next</span><span style="color:#666">();</span>
            <span style="color:#666">}</span>
        <span style="color:#666">}</span> <span style="color:#007020;font-weight:bold">catch</span><span style="color:#666">(</span>Throwable t<span style="color:#666">)</span> <span style="color:#666">{</span>
                <span style="color:#60a0b0;font-style:italic">// Do nothing
</span><span style="color:#60a0b0;font-style:italic"></span>        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">return</span> <span style="color:#007020;font-weight:bold">null</span><span style="color:#666">;</span>
    <span style="color:#666">}</span>
<span style="color:#666">});</span>
</code></pre></div><p>诸如 AccessController, Permission, SecurityManager 的代码始终是一个绕不开的主旋律。</p>
<p>为了探究这部分控制对项目中 ServiceLoader 的真正作用以及其编码意义，开始了对本文所描述的主体内容的初步了解。</p>
                <a class="summary-read-more" href='https://www.ffutop.com/posts/2018-07-04-java-%E5%AE%89%E5%85%A8%E8%AE%BF%E9%97%AE%E4%B8%8E%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/'><nobr class="summary-read-more">Read more →</nobr></a>
                <div class="post-line"></div>
            </div>
          </section>
          
          
        </div>
        <div class="pagination">
  <div class="row between-xs">
    <div class="col-xs-6 col-md-2 pagination-prev">
      
    </div>
    <div class="col-xs-6 col-md-2 pagination-next">
      
    </div>
</div>
</div>


        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="/view.html" target="_blank">View</a>
  </div>
  
  <div class="site-footer-item">
    <a href="/index.xml" target="_blank">RSS</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://github.com/ffutop" target="_blank">Github</a>
  </div>
  
  <div class="site-footer-item">
    <a href="/about/" target="_blank">About</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

 
  </body>
</html>
